AWSTemplateFormatVersion: "2010-09-09"
Description: AWS CloudFormation Nested stacks - Root template 
Parameters:
  EC2NameTag:
    Description: Name Tag of EC2
    Type: String
Resources:
  SGStack:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub https://${S3BucketName}.s3.amazonaws.com/sg.yaml
      TimeoutInMinutes: 20
  EC2Stack:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub https://${S3BucketName}.s3.amazonaws.com/ec2.yaml
      TimeoutInMinutes: 20
      Parameters:
        SecurityGroupIds: !GetAtt SGStack.Outputs.SGID
        Tags: 
        - Key: Name
          Value: 
            Ref: EC2NameTag
Outputs:
  WebsiteURL:
    Value: !GetAtt EC2Stack.Outputs.InstanceIP
